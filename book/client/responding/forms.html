<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Forms - Building Apps with Rust</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">Preamble</li><li class="chapter-item expanded "><a href="../../read_me_first.html"><strong aria-hidden="true">1.</strong> Notice to Reader</a></li><li class="chapter-item expanded "><a href="../../preface.html"><strong aria-hidden="true">2.</strong> Preface</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.</strong> Acknowledgements</div></li><li class="chapter-item expanded "><a href="../../about.html"><strong aria-hidden="true">4.</strong> About this Book</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.</strong> About the Author</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.</strong> If you get stuck or lose steam</div></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">Introductions</li><li class="chapter-item expanded "><div><strong aria-hidden="true">7.</strong> Programming</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">7.1.</strong> What it is</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">7.2.</strong> Why it's worth it</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">7.3.</strong> Why it's hard</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">7.4.</strong> Programmer Thinking</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.</strong> Languages</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">8.1.</strong> Meaning and Interpretation</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.</strong> Architectures</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">9.1.</strong> What is architecture</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.2.</strong> How your computer works</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.3.</strong> How the web works</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.4.</strong> The frontend-backend divide</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.5.</strong> General application architecture</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.6.</strong> Trade-offs between WASM and JavaScript</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.</strong> Tools and Languages</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">10.1.</strong> Web browsers</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.2.</strong> HTML</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.3.</strong> Bash and the terminal</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.4.</strong> Rust</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.5.</strong> Trunk</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.6.</strong> Cargo Leptos</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.</strong> Other Resources</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../intro/other_resources/rust.html"><strong aria-hidden="true">11.1.</strong> Rust</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><li class="part-title">Getting Started with Rust and Leptos</li><li class="chapter-item expanded "><a href="../../getting_started/setup.html"><strong aria-hidden="true">12.</strong> Setup</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">13.</strong> Architecture</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">13.1.</strong> Leptos Components - #[component]</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">13.2.</strong> Signals (reactive values) - create_signal</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">13.3.</strong> Effects (side effects) - create_effect</div></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><li class="part-title">Generting UI</li><li class="chapter-item expanded "><a href="../../client/summary.html"><strong aria-hidden="true">14.</strong> Introduction</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../getting_started/html_intro.html"><strong aria-hidden="true">14.1.</strong> HTML</a></li><li class="chapter-item expanded "><a href="../../getting_started/view_macro_html.html"><strong aria-hidden="true">14.2.</strong> HTML and the view! macro</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">15.</strong> Setup</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">15.1.</strong> Trunk</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">16.</strong> Introspection and Debugging</div></li><li class="chapter-item expanded "><a href="../../ui/leptos_component_intro.html"><strong aria-hidden="true">17.</strong> Introduction to Leptos components</a></li><li class="chapter-item expanded "><a href="../../ui/view_macro_variables.html"><strong aria-hidden="true">18.</strong> Variables and the view! macro</a></li><li class="chapter-item expanded "><a href="../../ui/leptos_component_properties.html"><strong aria-hidden="true">19.</strong> Component properties</a></li><li class="chapter-item expanded "><a href="../../ui/leptos_component_dynamic_content_separation.html"><strong aria-hidden="true">20.</strong> Component dynamic content separation</a></li><li class="chapter-item expanded "><a href="../../ui/loops_and_the_for_view_macro_tag.html"><strong aria-hidden="true">21.</strong> Loops and the &lt;For /&gt; view! macro tag</a></li><li class="chapter-item expanded "><a href="../../ui/conditional_display_and_the_show_macro.html"><strong aria-hidden="true">22.</strong> Conditional display and the &lt;Show&gt; view! macro tag</a></li><li class="chapter-item expanded "><a href="../../ui/tables_and_data_sets.html"><strong aria-hidden="true">23.</strong> Tables and data sets</a></li><li class="chapter-item expanded "><a href="../../ui/reserved_tags.html"><strong aria-hidden="true">24.</strong> Reserved Tags</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">Client Side</li><li class="chapter-item expanded "><a href="../../client/summary.html"><strong aria-hidden="true">25.</strong> Introduction</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">26.</strong> Setup</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">26.1.</strong> Trunk</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">27.</strong> Introspection and Debugging</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">28.</strong> Responding to Events</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../client/responding/leptos_component_logging_events.html"><strong aria-hidden="true">28.1.</strong> Witnessing events</a></li><li class="chapter-item expanded "><a href="../../client/responding/leptos_component_update_from_event.html"><strong aria-hidden="true">28.2.</strong> Reacting to events with event handlers</a></li><li class="chapter-item expanded "><a href="../../client/responding/event_handlers_as_props.html"><strong aria-hidden="true">28.3.</strong> Event handers as props</a></li><li class="chapter-item expanded "><a href="../../client/responding/event_bubbling_and_signal_generics.html"><strong aria-hidden="true">28.4.</strong> Event Bubbling and Signal Generics</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">28.5.</strong> Preventing bubbling and default event behaviours </div></li><li class="chapter-item expanded "><a href="../../client/responding/custom_events.html"><strong aria-hidden="true">28.6.</strong> Custom Events</a></li><li class="chapter-item expanded "><a href="../../client/responding/custom_event_data.html"><strong aria-hidden="true">28.7.</strong> Custom Event Data</a></li><li class="chapter-item expanded "><a href="../../client/responding/custom_event_module.html"><strong aria-hidden="true">28.8.</strong> Custom Event Module</a></li><li class="chapter-item expanded "><a href="../../client/responding/custom_event_module_with_data.html"><strong aria-hidden="true">28.9.</strong> Custom Event Module with Data</a></li><li class="chapter-item expanded "><a href="../../client/responding/custom_event_data_with_signals_and_effects.html"><strong aria-hidden="true">28.10.</strong> Custom Event Data with Signals and Effects</a></li><li class="chapter-item expanded "><a href="../../client/responding/custom_event_data_with_signals_and_effects_part2.html"><strong aria-hidden="true">28.11.</strong> Custom Event Data with Signals and Effects - Part 2</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">29.</strong> Sending Data</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../client/responding/forms.html" class="active"><strong aria-hidden="true">29.1.</strong> Forms</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">29.2.</strong> Acton Forms</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">30.</strong> Sending and Receiving Data</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">30.1.</strong> Fetch</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">30.2.</strong> Web Socket</div></li></ol></li><li class="chapter-item expanded "><a href="../../client/store_data/summary.html"><strong aria-hidden="true">31.</strong> Saving/Persisting Data</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../client/store_data/web_storage.html"><strong aria-hidden="true">31.1.</strong> Local Storage</a></li><li class="chapter-item expanded "><a href="../../client/store_data/cookies.html"><strong aria-hidden="true">31.2.</strong> Cookies</a></li><li class="chapter-item expanded "><a href="../../client/store_data/indexeddb.html"><strong aria-hidden="true">31.3.</strong> IndexedDB</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><li class="part-title">Server Side</li><li class="chapter-item expanded "><a href="../../server/summary.html"><strong aria-hidden="true">32.</strong> Introduction</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">33.</strong> Setup</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../server/cargo_leptos/summary.html"><strong aria-hidden="true">33.1.</strong> Cargo Leptos</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../server/cargo_leptos/setup.html"><strong aria-hidden="true">33.1.1.</strong> Setup</a></li><li class="chapter-item expanded "><a href="../../file_structure.html"><strong aria-hidden="true">33.1.2.</strong> File Structure</a></li><li class="chapter-item expanded "><a href="../../config.html"><strong aria-hidden="true">33.1.3.</strong> Config</a></li><li class="chapter-item expanded "><a href="../../overview_main.html"><strong aria-hidden="true">33.1.4.</strong> Server Initialization and Main.rs</a></li><li class="chapter-item expanded "><a href="../../overview_app.html"><strong aria-hidden="true">33.1.5.</strong> Leptos app main component and app.rs</a></li><li class="chapter-item expanded "><a href="../../leptos_meta.html"><strong aria-hidden="true">33.1.6.</strong> Leptos_meta</a></li><li class="chapter-item expanded "><a href="../../leptos_router.html"><strong aria-hidden="true">33.1.7.</strong> Leptos_router</a></li></ol></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">34.</strong> Introspection and Debugging</div></li><li class="chapter-item expanded "><a href="../../server/responding.html"><strong aria-hidden="true">35.</strong> Responding to Requests</a></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">35.1.</strong> Headers</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">35.2.</strong> Cookies</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">35.3.</strong> Body</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">36.</strong> Responding to Requests</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../server/responding/accessing_request_data.html"><strong aria-hidden="true">36.1.</strong> Accessing Request Data</a></li><li class="chapter-item expanded "><a href="../../se.html"><strong aria-hidden="true">36.2.</strong> Server Functions</a></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">36.2.1.</strong> HTML</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">36.2.2.</strong> Data / API Endpoints</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">36.3.</strong> Server Actions</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">36.4.</strong> Form Actions</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">37.</strong> Client Server Communication</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../server/server_client_communication/server_functions.html"><strong aria-hidden="true">37.1.</strong> Server Functions</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">38.</strong> Sending Data</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">38.1.</strong> Cookies</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">39.</strong> Sending and Receiving Data</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">39.1.</strong> Web Sockets</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">40.</strong> Saving/Persisting Data</div></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">Deployment</li><li class="chapter-item expanded "><div><strong aria-hidden="true">41.</strong> Render.com</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">42.</strong> Fly.io</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">43.</strong> Cloudflare Workers</div></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">Desktop Applications</li><li class="chapter-item expanded "><div><strong aria-hidden="true">44.</strong> Tauri</div></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">Tutorial Projects</li><li class="chapter-item expanded "><a href="../../tutorial_projects/initiative_tracker/summary.html"><strong aria-hidden="true">45.</strong> RPG Initiative Tracker</a></li><li class="chapter-item expanded "><a href="../../tutorial_projects/chat/summary.html"><strong aria-hidden="true">46.</strong> Chat</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">Quick Reference</li><li class="chapter-item expanded "><a href="../../quick_reference/rust/structuring_applictions.html"><strong aria-hidden="true">47.</strong> Structuring Applications</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">Recipes</li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">Appendix</li><li class="chapter-item expanded "><div><strong aria-hidden="true">48.</strong> Common Application Behaviours</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">48.1.</strong> Form Validation</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">49.</strong> Common Design Patterns</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">49.1.</strong> Event Sourcing</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">50.</strong> Common Problems and Concerns</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">50.1.</strong> Quality</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">50.1.1.</strong> UI Response Time</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">50.1.2.</strong> Bundle Size</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">50.1.3.</strong> Partial Hydration</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">50.2.</strong> Consistency</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">50.2.1.</strong> Offline Support and Data Sync</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">50.2.2.</strong> Observability and Logging</div></li></ol></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Building Apps with Rust</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="forms"><a class="header" href="#forms">Forms</a></h1>
<h2 id="what-we-know"><a class="header" href="#what-we-know">What we know</a></h2>
<ul>
<li>We can capture events and respond to them</li>
<li>Signals allow us to persist data across events</li>
</ul>
<h2 id="what-well-learn"><a class="header" href="#what-well-learn">What we'll learn</a></h2>
<ul>
<li>How to respond to multipart form data</li>
</ul>
<h2 id="the-lesson"><a class="header" href="#the-lesson">The Lesson</a></h2>
<p>Back in the day we used to interact with websites by submitted form data to a server with a requested resource (like a specific page). The page would render, often using or processing the form data that was sent with it, would generate HTML, and then provide us a response. This is how the majority of the web still works to this day!</p>
<p>We're going to replicate a similar data flow so that you can collect sets of data using forms, but process them all on the client (in the browser).</p>
<p>We'll start with a Rad app component and some boiler plate, mounting it to the body:</p>
<pre><pre class="playground"><code class="language-rust">use leptos::*;  
  
fn main() {  
    mount_to_body(|cx| {  
        view! {  
            cx,  
            &lt;RadApp /&gt;  
        }  
    })  
}  
  
#[component]  
fn RadApp(cx: Scope) -&gt; Element {  
    view! {  
        cx,  
        &lt;form&gt;  
        &lt;/form&gt;  
    }  
}</code></pre></pre>
<p>Our form has no submit button, so we'll add that in:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[component]  
fn RadApp(cx: Scope) -&gt; Element {  
    view! {  
        cx,  
        &lt;form&gt;  
	        &lt;input type=&quot;submit&quot; value=&quot;Submit&quot;/&gt;
        &lt;/form&gt;  
    }  
}
<span class="boring">}</span></code></pre></pre>
<p>We now have a basic form that we can submit. If we click submit, the form takes it data (of which there is none) and posts it to the form's action destination, which if non will default to the current page. This effectively looks like the page has reloaded even though it's actually being re-requesed with the updated form data.</p>
<p>Let's add a text field so that we can submit some data.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>&lt;form&gt;  
	&lt;input type=&quot;text&quot;  
	    name=&quot;fav_thing_to_paint&quot;  
	    placeholder=&quot;Your fav thing to paint...&quot;  
	    value=&quot;&quot;  
	/&gt;
	&lt;input type=&quot;submit&quot; value=&quot;Submit&quot;/&gt;
&lt;/form&gt;  
<span class="boring">}</span></code></pre></pre>
<blockquote>
<p>I broke the lines up here purely for formatting. HTML elements don't care about line breaks inbetween attributes.</p>
</blockquote>
<p>If we type in something into the text field and hit submit, you'll see the page load, and the field gets reset. What is happening here is that the form is taking its form data and submitting it to the form's action url as part of a new request. The action property is a property on the form element telling the form where to send its data. It defaults to the current page that it's on if the action is not set.</p>
<p>If we had <code>&lt;form action=&quot;https://www.rust-lang.org&quot;&gt;</code> and we clicked submit, the form would send our data to rust-lang.org! And isntead of looking like a page reload, we'd see the rust-lang.org home page.</p>
<p>We always have to remember that here we're just making a more complicated request with some configuration (the form data) and our brower is rendering the response.</p>
<p>In old school website, a server would render a template and process form submissions for that template at the same time. If a request came in without form data, the fields would be blank. If a request came in that had posted data (submitted via the form submission), whoever coded the form template which is processed on the server could pluck out that posted data, and enter in the submitted values as the values of the input fields in the form. This way form submission data doesn't get erased if, for example, some form validation failed. The data just gets passed back and forth. It is not persisting anywhere.</p>
<blockquote>
<p>Fun Fact! Forms default to 'post' as their method of sending data. You can change this method to 'get' and your data will become query string variables.</p>
</blockquote>
<h3 id="responding-to-the-event"><a class="header" href="#responding-to-the-event">Responding to the event</a></h3>
<p>Let's add a from handler for the <code>submit</code> event. But this point, things should look pretty familiar.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[component]  
fn RadApp(cx: Scope) -&gt; Element {  
	
	// We create a form handler
    let form_handler = |_|{  
        leptos::log!(&quot;The form was submitted&quot;);  
    };  

	// And we added it with `on:submit` to the form element
    view! {  
        cx,  
        &lt;form on:submit=form_handler&gt;  
            &lt;input type=&quot;text&quot;  
                name=&quot;fav_thing_to_paint&quot;  
                placeholder=&quot;Your fav thing to paint...&quot;  
                value=&quot;&quot;  
            /&gt;  
            &lt;input type=&quot;submit&quot; value=&quot;Submit&quot; /&gt;  
        &lt;/form&gt;  
    }  
}
<span class="boring">}</span></code></pre></pre>
<h3 id="preventing-the-form-from-sending"><a class="header" href="#preventing-the-form-from-sending">Preventing the form from sending</a></h3>
<p>When we click submit, the form submits so quickly that we can't even see the <code>form_handler</code>'s message. Also, we're working on a client side application in this context, so we don't want this page to reload and rerender. We want to <em>prevent the default behaviour</em>.</p>
<p>To do this we need to actually do something with the event in our event handler that we've been ignoring this whole time. Let's change it from an underscore to something easy to understand, like <code>submission_event</code>. </p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>	let form_handler = |submission_event|{  
        submission_event.prevent_default();
    };  
<span class="boring">}</span></code></pre></pre>
<p>The above won't work though, because the closure doesn't know where it will be used. Rust doesn't know that this closure will be called from the event system and that the first argument will be an event. To fix this problem we'll give it a type <code>web_sys::SubmitEvent</code>.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>	let form_handler = |submission_event: web_sys::SubmitEvent|{  
        submission_event.prevent_default();
    };  
<span class="boring">}</span></code></pre></pre>
<p>Calling prevent_default() on the submit event will prevent the form from actually being submitted. We've short circuited the default behaviour!</p>
<blockquote>
<p>Sometimes I find that I don't know exactly what to write for the type so I'll put in some form of type, try to compile the application, and then let Rust's compiler tell me what was supposed to be there. It's right most of the time.</p>
</blockquote>
<h3 id="capturing-form-data"><a class="header" href="#capturing-form-data">Capturing form data</a></h3>
<p>Events have the source stored at a proeprty called <code>target</code>. We can grab the element that emitted the event by calling it. </p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let form_handler = |submission_event: web_sys::SubmitEvent|{  
	submission_event.prevent_default();
	let form = submission_event.target();
};  
<span class="boring">}</span></code></pre></pre>
<p>We don't know for sure if the target will actually be a proper element. The return type of the <code>target</code> method is <code>Option&lt;EventTarget&gt;</code>. As we learned in the previous lessons, we can match on the form's value to account for Some(form) or None.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let form_handler = |submission_event: web_sys::SubmitEvent|{  
    submission_event.prevent_default();  
    match submission_event.target() {  
        None =&gt; {},  
        Some(form_event_target) =&gt; {  
            // we need to do things here
		}  
    }  
};
<span class="boring">}</span></code></pre></pre>
<p>form_event_target doesn't have a specific type yet, so we need to explicitly tell Rust, &quot;Hey, this is a HtmlFormElement&quot; which we need to derive a form data object. </p>
<blockquote>
<p>It should be noted that it took research to sort through this which is why I'm presenting it to you. This way you have one place to look it all up. :)</p>
</blockquote>
<p>We're going to add the following line once we've destructured our <code>form_event_target</code>.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let form_element = form_event_target.unchecked_ref::&lt;web_sys::HtmlFormElement&gt;();  
<span class="boring">}</span></code></pre></pre>
<blockquote>
<p>Here we take our target, which is untyped and called <code>unchecked_ref()</code> to type it. We add a turbofish <code>::&lt;SomeType&gt;</code> between the name of the method and the parenthesis to specify the generic type. In this case, it's the type that it will become when we call unchecked_ref on it.</p>
</blockquote>
<p>This will fail to work, and Rust's compiler wil complain. If we look at the definition of web_sys::HtmlFormElement we'll see that it needs to be set as a feature dependency in cargo.toml.</p>
<p>We'll add the following to our cargo.toml to ensure that websys uses the two features we'll need:</p>
<pre><code class="language-toml">[dependencies.web-sys]  
features = [ &quot;FormData&quot;, &quot;HtmlFormElement&quot;]
</code></pre>
<p>Next we'll setup form data which will use data from the form element. </p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let form_data = web_sys::FormData::new_with_form(&amp;form_element);
<span class="boring">}</span></code></pre></pre>
<p>This returns a result type, with its return type being <code>Result&lt;FormData, JsValue&gt;</code>. As we've sen before, we'll need to destructure it to pull out the value that is of type <code>FormData</code>.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let form_data = web_sys::FormData::new_with_form(&amp;form_element);  
match form_data{  
    Err(_) =&gt; {},  
    Ok(data) =&gt;{  
        // the data here is a FormData thing.
    }  
}
<span class="boring">}</span></code></pre></pre>
<p>FormData has some useful methods, one of which we can use to extract values from fields by name.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let fav_thing = data.get(&quot;fav_thing_to_paint&quot;).as_string();
<span class="boring">}</span></code></pre></pre>
<blockquote>
<p>Here we ask the form data to give us its value for &quot;fav_thing_to_paint&quot; as a string value. This is still an option, so we'll have to deal with <code>Some(the_value)</code> or <code>None</code>.</p>
</blockquote>
<p>I'm specifically showing you pattern matchin as the simplest way to deal with these result and option types. There are many shorter ways of doing that which you will learn later.</p>
<p>It is also possible to inline the match statement and avoid assigning the temporary variable. We could write the following:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let fav_thing = data.get(&quot;fav_thing_to_paint&quot;).as_string();  
match fav_thing {  
    Some(actual_fav_thing_value) =&gt; {},  
    None =&gt; {}
}
<span class="boring">}</span></code></pre></pre>
<p>or</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>match data.get(&quot;fav_thing_to_paint&quot;).as_string() {  
    Some(fav_thing) =&gt; {},  
    None =&gt; {}
}
<span class="boring">}</span></code></pre></pre>
<p>The whole thing all together looks like this:</p>
<pre><pre class="playground"><code class="language-rust">use leptos::*;  
  
fn main() {  
    mount_to_body(|cx| {  
        view! {  
            cx,  
            &lt;RadApp /&gt;  
        }  
    })  
}  
  
#[component]  
fn RadApp(cx: Scope) -&gt; Element {  
    let form_handler = |submission_event: web_sys::SubmitEvent|{  
        submission_event.prevent_default();  
        match submission_event.target() {  
            None =&gt; {},  
            Some(form_event_target) =&gt; {  
                let form_element = form_event_target.unchecked_ref::&lt;web_sys::HtmlFormElement&gt;();  
                let form_data = web_sys::FormData::new_with_form(&amp;form_element);  
                match form_data{  
                    Err(_) =&gt; {},  
                    Ok(data) =&gt;{  
                        match data.get(&quot;fav_thing_to_paint&quot;).as_string() {  
                            Some(fav_thing) =&gt; {  
                                leptos::log!(&quot;{:?}&quot;, fav_thing);  
                            },  
                            None =&gt; {}  
                        }  
                    }  
                }  
            }  
        }  
    };  
    view! {  
        cx,  
        &lt;form on:submit=form_handler&gt;  
            &lt;input type=&quot;text&quot;  
                name=&quot;fav_thing_to_paint&quot;  
                placeholder=&quot;Your fav thing to paint...&quot;  
                value=&quot;&quot;  
            /&gt;  
            &lt;input type=&quot;submit&quot; value=&quot;Submit&quot; /&gt;  
        &lt;/form&gt;  
    }  
}</code></pre></pre>
<h3 id="adding-signals"><a class="header" href="#adding-signals">Adding signals</a></h3>
<p>We can now create a signal and use it to store the posted/submitted data.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let (last_fav_thing, set_last_fav_thing) = create_signal(cx, String::new());
<span class="boring">}</span></code></pre></pre>
<p>We will add <code>move</code> to the handler, so that we can move the signal into it:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let form_handler = move|submission_event: web_sys::SubmitEvent|{
<span class="boring">}</span></code></pre></pre>
<p>And we'll store the value using the signal:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>set_last_fav_thing(fav_thing);
<span class="boring">}</span></code></pre></pre>
<p>The last piece is displaying the last submission in our <code>view!</code> template:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>&lt;p&gt;&quot;Your last fav thing was: &quot; {last_fav_thing}&lt;/p&gt;
<span class="boring">}</span></code></pre></pre>
<p>All togehter we have a nice example of how to collect form data so that we can work with it!</p>
<pre><pre class="playground"><code class="language-rust">use leptos::*;  
  
fn main() {  
    mount_to_body(|cx| {  
        view! {  
            cx,  
            &lt;RadApp /&gt;  
        }  
    })  
}  
  
#[component]  
fn RadApp(cx: Scope) -&gt; Element {  
  
    let (last_fav_thing, set_last_fav_thing) = create_signal(cx, String::new());  
  
    let form_handler = move|submission_event: web_sys::SubmitEvent|{  
        submission_event.prevent_default();  
        match submission_event.target() {  
            None =&gt; {},  
            Some(form_event_target) =&gt; {  
                let form_element = form_event_target.unchecked_ref::&lt;web_sys::HtmlFormElement&gt;();  
                let form_data = web_sys::FormData::new_with_form(&amp;form_element);  
                match form_data{  
                    Err(_) =&gt; {},  
                    Ok(data) =&gt;{  
                        match data.get(&quot;fav_thing_to_paint&quot;).as_string() {  
                            Some(fav_thing) =&gt; {  
                                set_last_fav_thing(fav_thing);  
                            },  
                            None =&gt; {}  
                        }  
                    }  
                }  
            }  
        }  
    };  
    view! {  
        cx,  
        &lt;form on:submit=form_handler&gt;  
            &lt;p&gt;&quot;Your last fav thing was: &quot; {last_fav_thing}&lt;/p&gt;  
            &lt;input type=&quot;text&quot;  
                name=&quot;fav_thing_to_paint&quot;  
                placeholder=&quot;Your fav thing to paint...&quot;  
                value=&quot;&quot;  
            /&gt;  
            &lt;input type=&quot;submit&quot; value=&quot;Submit&quot; /&gt;  
        &lt;/form&gt;  
    }  
}</code></pre></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../client/responding/custom_event_data_with_signals_and_effects_part2.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../../client/store_data/summary.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../client/responding/custom_event_data_with_signals_and_effects_part2.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../../client/store_data/summary.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
